<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Firebase</title>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-messaging-compat.js"></script>

<style>
body{
font-family:Arial;
text-align:center;
background:#111;
color:#fff;
padding:40px;
}
button{
padding:15px 30px;
font-size:18px;
border:none;
border-radius:12px;
background:#00c853;
color:white;
cursor:pointer;
}
#log{
margin-top:25px;
background:#000;
padding:15px;
border-radius:12px;
text-align:left;
white-space:pre-line;
}
</style>
</head>
<body>

<h2>ðŸ”” Ø§Ø®ØªØ¨Ø§Ø± Firebase Notifications</h2>
<button onclick="start()">ØªØ´ØºÙŠÙ„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±</button>

<div id="log">Logs:\n</div>

<script>
function log(t){
document.getElementById("log").innerHTML+=t+"\n";
}

/* Firebase Config */
const firebaseConfig = {
apiKey: "AIzaSyDPcyxpHRuLx9T2CO4LJ-n9jaqAynUjvqw",
authDomain: "xix5-a119a.firebaseapp.com",
projectId: "xix5-a119a",
messagingSenderId: "332265425367",
appId: "1:332265425367:web:0a95e71d8bd0058503a392"
};

firebase.initializeApp(firebaseConfig);
const messaging = firebase.messaging();

async function start(){

log("Ø¨Ø¯Ø¡ Ø§Ù„ÙØ­Øµ...");

/* Ø¯Ø¹Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª */
if(!("Notification" in window)){
log("âŒ Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª");
return;
}

/* Ø·Ù„Ø¨ Ø§Ù„Ø¥Ø°Ù† */
const permission = await Notification.requestPermission();
log("Permission: "+permission);

if(permission!=="granted"){
log("âŒ ØªÙ… Ø±ÙØ¶ Ø§Ù„Ø¥Ø°Ù†");
return;
}

/* ØªØ³Ø¬ÙŠÙ„ SW */
try{
await navigator.serviceWorker.register("firebase-messaging-sw.js");
log("âœ” Service Worker OK");
}catch(e){
log("âŒ SW Error: "+e);
return;
}

/* Ø¬Ù„Ø¨ Ø§Ù„ØªÙˆÙƒÙ† */
try{
const token = await messaging.getToken({
vapidKey:"BEIkmsbcatAy4Kq8_ehZE19KzKQx2pHaYvIKmgTEq1oFSmePLEG7faBAsibGl1mFCNDbFv9-znm2x4DzpDISS8o",
serviceWorkerRegistration: await navigator.serviceWorker.ready
});

if(token){
log("âœ… TOKEN:");
log(token);
}else{
log("âŒ Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙˆÙƒÙ†");
}
}catch(err){
log("âŒ Token Error:");
log(err);
}

/* Ø¥Ø´Ø¹Ø§Ø± ØªØ¬Ø±ÙŠØ¨ÙŠ */
new Notification("Ù†Ø¬Ø­ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± ðŸŽ‰",{body:"Ø§Ù„Ø¥Ø´Ø¹Ø§Ø±Ø§Øª ØªØ¹Ù…Ù„"});
}

/* Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø± Ø£Ø«Ù†Ø§Ø¡ ÙØªØ­ Ø§Ù„ØµÙØ­Ø© */
messaging.onMessage(payload=>{
log("ðŸ“© Ø¥Ø´Ø¹Ø§Ø± ÙˆØ§Ø±Ø¯:");
log(JSON.stringify(payload));
});
</script>

</body>
</html>
